---
allowed-tools: Bash(git fetch:*), Bash(git status:*), Bash(git config:*), Bash(git branch:*), Bash(git diff:*), Bash(git pull:*), Bash(git push:*), Bash(git log:*), Read, Write
argument-hint: <ç›®æ¨™åˆ†æ”¯>
description: ä¸Šå‚³å‰çš„è‡ªå‹•åŒ–åˆ†æ”¯æª¢æŸ¥èˆ‡å®‰å…¨æ¨é€
---

# å…±ç”¨æµç¨‹
@.claude/commands/branch-merge.md
@.claude/commands/pack-zh.md

# ä¸Šå‚³å‰åˆ†æ”¯æª¢æŸ¥èˆ‡è‡ªå‹•åŒ–æ¨é€

1. **ç¬¬ä¸€æ­¥ï¼šç¢ºèªåˆ†æ”¯ç‹€æ…‹**
  - ç•¶å‰åˆ†æ”¯ï¼š!`git branch --show-current`
  - é¡¯ç¤ºæ‰€æœ‰åˆ†æ”¯ï¼š!`git branch -a`
  - ç›®æ¨™åˆ†æ”¯ï¼š$1
  - å¦‚æœç›®æ¨™åˆ†æ”¯æ˜¯ `main`ï¼š  
    - é¡¯ç¤ºæç¤ºï¼š  
      ```
      ğŸš« ç¦æ­¢ç›´æ¥æ¨é€åˆ° main  
      ç³»çµ±å¯è‡ªå‹•å»ºç«‹ä¸€å€‹æ–°åˆ†æ”¯ï¼ˆå‘½åè¦å‰‡ï¼šfeature/auto-<æ—¥æœŸæ™‚é–“>ï¼‰ä¸¦æ¨é€è‡³é ç«¯ã€‚  
      æ˜¯å¦è¦å»ºç«‹ä¸¦æ”¹ä»¥æ­¤åˆ†æ”¯ç¹¼çºŒæµç¨‹ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰  
      ```
    > è«‹ç­‰å¾…æˆ‘å›å¾©é¸é …å†é€²è¡Œè™•ç†ã€‚
      - è‹¥é¸æ“‡ã€Œæ˜¯ã€ï¼š å»ºç«‹æ–°åˆ†æ”¯ï¼Œä¸¦å°‡æ­¤è¨­ç‚ºç›®æ¨™åˆ†æ”¯å¾Œç¹¼çºŒåŸ·è¡Œä¸‹ä¸€æ­¥ 
      - è‹¥é¸æ“‡ã€Œæ˜¯ã€ï¼š
        - è¨­å®šæ–°åˆ†æ”¯åç¨±ï¼ˆåƒ…æŒ‡æ´¾ï¼Œä¸ç«‹å³å»ºç«‹ï¼‰ï¼š
          - `æ–°ç›®æ¨™åˆ†æ”¯ = feature/auto-$(date +"%Y%m%d-%H%M")`
        - å°‡æ¨é€ç›®æ¨™æ”¹ç‚ºæ–°åˆ†æ”¯ï¼š
          - [ç›®æ¨™åˆ†æ”¯] = [æ–°ç›®æ¨™åˆ†æ”¯]
        - é¡¯ç¤ºç¢ºèªè¨Šæ¯ï¼š
          ```
          âœ… å·²å°‡æ¨é€ç›®æ¨™æ›´æ–°ç‚ºï¼šfeature/auto-YYYYMMDD-HHMM
          æ¥ä¸‹ä¾†å°‡ä¾ç…§æµç¨‹é€²è¡Œæœ¬åœ°ç‹€æ…‹æª¢æŸ¥èˆ‡é ç«¯åŒæ­¥ï¼Œå†æ–¼æ¨é€æ­¥é©Ÿè‡ªå‹•å»ºç«‹é ç«¯åˆ†æ”¯ã€‚
          ```
        - ç¹¼çºŒåˆ°å¾ŒçºŒæ­¥é©Ÿã€‚
      - è‹¥é¸æ“‡ã€Œå¦ã€ï¼š çµæŸæµç¨‹ï¼Œä¸¦é¡¯ç¤ºæç¤ºï¼š  
          ```
          æ¨é€æµç¨‹å·²ä¸­æ­¢ï¼ŒæœªåŸ·è¡Œä»»ä½•æ“ä½œã€‚  
          ```

  åˆ¤æ–·ç•¶å‰åˆ†æ”¯èˆ‡ç›®æ¨™åˆ†æ”¯é—œä¿‚ï¼š
  - è‹¥ç›¸åŒ â†’ é€²å…¥æ­£å¸¸æ¨é€æµç¨‹
  - è‹¥ä¸åŒ â†’ è©¢å•ï¼šã€Œæ‚¨ç›®å‰åœ¨ [ç•¶å‰åˆ†æ”¯] ä½†è¦æ¨é€åˆ° [ç›®æ¨™åˆ†æ”¯]ï¼Œé€™å°‡åŸ·è¡Œè·¨åˆ†æ”¯æ¨é€ã€‚è«‹é¸æ“‡ï¼š
    [1] ç¢ºèªè·¨åˆ†æ”¯æ¨é€
    [2] åˆ‡æ›åˆ°ç›®æ¨™åˆ†æ”¯
    [3] å»ºç«‹æ–°çš„é ç«¯åˆ†æ”¯

  > è«‹ç­‰å¾…æˆ‘å›å¾©é¸é …å†é€²è¡Œä¸‹ä¸€æ­¥ã€‚

2. **ç¬¬äºŒæ­¥ï¼šæª¢æŸ¥æœ¬åœ°ç‹€æ…‹èˆ‡å®‰å…¨æª¢æŸ¥**
  - é¡¯ç¤ºå·¥ä½œç›®éŒ„ç‹€æ…‹ï¼š!`git status -s`

  **2.1 Gitå¿½ç•¥æª”æ¡ˆæª¢æŸ¥**
  - æª¢æŸ¥ `.gitignore` æª”æ¡ˆæ˜¯å¦å­˜åœ¨
    **æƒ…æ³Aï¼š`.gitignore` ä¸å­˜åœ¨ï¼ˆé¦–æ¬¡è¨­å®šï¼‰**
    - è©¢å•æ˜¯å¦å»ºç«‹åŸºç¤ `.gitignore` è¦å‰‡ï¼ˆæ˜¯/å¦ï¼‰

    > è«‹ç­‰å¾…æˆ‘å›å¾©å†é€²è¡Œä¸‹ä¸€æ­¥ã€‚

      - è‹¥é¸æ“‡ã€Œæ˜¯ã€â†’ å»ºç«‹ `.gitignore` æª”æ¡ˆ
      - **é‡è¦**ï¼šæª¢æŸ¥æ­·å²æäº¤ä¸­çš„æ•æ„Ÿæª”æ¡ˆ
        - ä½¿ç”¨æŒ‡ä»¤ï¼š!`git ls-files -ic --exclude-standard`
        - è‹¥ç™¼ç¾æ•æ„Ÿæª”æ¡ˆåœ¨æ­·å²æäº¤ä¸­ï¼Œè­¦å‘Šä½¿ç”¨è€…ï¼š
          ```
          âš ï¸ ç™¼ç¾ä»¥ä¸‹æª”æ¡ˆå·²å­˜åœ¨æ–¼æ­·å²æäº¤ä¸­ï¼š
          [æª”æ¡ˆæ¸…å–®]
          æ³¨æ„ï¼šé€™äº›æª”æ¡ˆé›–ç„¶å¯ä»¥å¾å¾ŒçºŒæäº¤ä¸­ç§»é™¤è¿½è¹¤ï¼Œä½†ä»æœƒä¿ç•™åœ¨ Git æ­·å²è£¡ï¼Œ
          ä»–äººä¾èˆŠèƒ½é€éå›æº¯æŸ¥çœ‹ã€‚
          è‹¥è¦å¾¹åº•åˆªé™¤ï¼Œå¿…é ˆé¡å¤–ä½¿ç”¨ git filter-branch æˆ– git filter-repo
          é‡å¯«æ­·å²ä¸¦å¼·åˆ¶æ¨é€ (--force)ã€‚

          ```
          - è‹¥é¸æ“‡ã€Œæ˜¯ã€â†’ åŸ·è¡Œ git rm --cachedï¼Œä¸å†è¢« Git ç´å…¥å¾ŒçºŒ commit ä¸­ + æäº¤æ¸…ç†
          - è‹¥é¸æ“‡ã€Œå¦ã€â†’ ç¹¼çºŒä½†è­¦å‘Šé¢¨éšª

        > è«‹ç­‰å¾…æˆ‘å›å¾©å†é€²è¡Œä¸‹ä¸€æ­¥ã€‚

    **æƒ…æ³Bï¼š`.gitignore` å·²å­˜åœ¨ï¼ˆå¾ŒçºŒæ¨é€ï¼‰**
      - è·³éæ•æ„Ÿæª”æ¡ˆæª¢æŸ¥ï¼ˆå› ç‚º `.gitignore` æœƒè‡ªå‹•é˜²æ­¢è¿½è¹¤æ–°çš„æ•æ„Ÿæª”æ¡ˆï¼‰
      - æ³¨æ„ï¼šå¦‚æœä½¿ç”¨è€…ä¿®æ”¹äº† `.gitignore` è¦å‰‡ï¼Œå¯æ‰‹å‹•åŸ·è¡Œ `git ls-files -ic --exclude-standard` æª¢æŸ¥æ˜¯å¦æœ‰éœ€è¦ç§»é™¤è¿½è¹¤çš„èˆŠæª”æ¡ˆ
    > è«‹ç­‰å¾…æˆ‘å›å¾© ç¹¼çºŒ å†é€²è¡Œä¸‹ä¸€æ­¥ã€‚

  **2.2 æœªæäº¤è®Šæ›´æª¢æŸ¥**
  - è‹¥ç™¼ç¾æœªè¿½è¹¤æˆ–æœªæäº¤çš„æª”æ¡ˆï¼Œè©¢å•ï¼šã€Œç™¼ç¾æœªæäº¤çš„è®Šæ›´ï¼Œæ˜¯å¦è¦å…ˆæäº¤ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰ã€
    - è‹¥é¸æ“‡ã€Œæ˜¯ã€â†’ å‘¼å« `/pack-zh` é€²è¡Œæäº¤ï¼ŒçµæŸå¾Œç¹¼çºŒæ¨é€æµç¨‹
    - è‹¥é¸æ“‡ã€Œå¦ã€â†’ ç¹¼çºŒæ¨é€æµç¨‹

  > è«‹ç­‰å¾…æˆ‘å›å¾©å†é€²è¡Œä¸‹ä¸€æ­¥ã€‚

3. **ç¬¬ä¸‰æ­¥ï¼šæª¢æŸ¥é ç«¯åŒæ­¥**
  è«‹å†æ¬¡ç¢ºèª[ç•¶å‰åˆ†æ”¯]å’Œ[ç›®æ¨™åˆ†æ”¯]å’Œæˆ‘ä¸€é–‹å§‹è¦æ±‚æ¨é€çš„æ˜¯ä¸€æ¨£çš„åƒæ•¸å…§å®¹ã€‚
  åƒ…åœ¨ç•¶å‰åˆ†æ”¯ = ç›®æ¨™åˆ†æ”¯æ™‚åŸ·è¡ŒåŒæ­¥æª¢æŸ¥ï¼š
  - å–å¾—é ç«¯æœ€æ–°ç‹€æ…‹ï¼š!`git fetch origin`
  - æª¢æŸ¥æœ¬åœ°èˆ‡é ç«¯çš„é—œä¿‚ï¼š!`git status -uno`

  è‹¥æœ¬åœ°åˆ†æ”¯è½å¾Œæ–¼é ç«¯ï¼Œè©¢å•ï¼šã€Œæœ¬åœ°åˆ†æ”¯è½å¾Œæ–¼é ç«¯ï¼Œéœ€è¦åŒæ­¥å¾Œæ‰èƒ½æ¨é€ã€‚è«‹é¸æ“‡è™•ç†æ–¹å¼ï¼š
  [1] ä½¿ç”¨ /branch-merge é€²è¡Œå®‰å…¨åˆä½µï¼ˆæ¨è–¦ï¼‰
  [2] å˜—è©¦ rebaseï¼ˆå¯èƒ½æœ‰è¡çªé¢¨éšªï¼‰
  [3] æ‰‹å‹•è™•ç†ï¼ˆå–æ¶ˆæ¨é€ï¼‰


  > è«‹ç­‰å¾…æˆ‘å›å¾©é¸é …å†é€²è¡Œä¸‹ä¸€æ­¥ã€‚

  è‹¥æœ¬åœ°åˆ†æ”¯è¶…å‰æˆ–åŒæ­¥ â†’ å¯ç›´æ¥æ¨é€
  è‹¥ç•¶å‰åˆ†æ”¯ â‰  ç›®æ¨™åˆ†æ”¯ â†’ è·³éåŒæ­¥æª¢æŸ¥ï¼Œç›´æ¥æ¨é€

4. **ç¬¬å››æ­¥ï¼šåŸ·è¡Œæ¨é€**

  æ ¹æ“šåˆ†æ”¯é—œä¿‚åŸ·è¡Œæ¨é€ï¼š
  - è‹¥ç•¶å‰åˆ†æ”¯ = ç›®æ¨™åˆ†æ”¯ â†’ åŸ·è¡Œï¼š`git push origin [åˆ†æ”¯å]`
  - è‹¥ç•¶å‰åˆ†æ”¯ â‰  ç›®æ¨™åˆ†æ”¯ â†’ åŸ·è¡Œï¼š`git push origin [ç•¶å‰åˆ†æ”¯]:[ç›®æ¨™åˆ†æ”¯]`

  **è‹¥æ¨é€è¢«æ‹’çµ•**ï¼š
  - ç«‹å³å–å¾—é ç«¯æœ€æ–°ç‹€æ…‹ï¼š`git fetch origin`
  - è©¢å•ï¼šã€Œæ¨é€è¢«æ‹’çµ•ï¼Œé ç«¯åˆ†æ”¯æœ‰æ–°æäº¤ã€‚è«‹é¸æ“‡è™•ç†æ–¹å¼ï¼š
    [1] ä½¿ç”¨ /branch-merge é€²è¡Œå®‰å…¨åˆä½µï¼ˆæ¨è–¦ï¼‰
    [2] å˜—è©¦ rebaseï¼ˆå¯èƒ½æœ‰è¡çªé¢¨éšªï¼‰
    [3] æ‰‹å‹•è™•ç†ï¼ˆå–æ¶ˆæ¨é€ï¼‰

  > è«‹ç­‰å¾…æˆ‘å›å¾©é¸é …å†é€²è¡Œè™•ç†ã€‚

5. **ç¬¬äº”æ­¥ï¼šæ¨é€æˆåŠŸå ±å‘Š**

  æ¨é€æˆåŠŸå¾Œï¼Œè©¢å•ï¼šã€Œæ¨é€å®Œæˆï¼æ˜¯å¦è¦ç”Ÿæˆæ¨é€å ±å‘Šï¼Ÿï¼ˆæ˜¯/å¦ï¼‰ã€

  è‹¥é¸æ“‡ã€Œæ˜¯ã€â†’ ç”Ÿæˆå ±å‘ŠåŒ…å«ï¼š
  - ç•¶å‰æ—¥æœŸï¼šä½¿ç”¨ `date +"%Y-%m-%d %H:%M:%S"`
  - æ¨é€åˆ†æ”¯è³‡è¨Š
  - æœ¬åœ°æ“ä½œè€…ï¼šä½¿ç”¨ `git config user.name`
  - æ­¤æ¬¡æ¨é€çš„ commit ç´€éŒ„ï¼ˆå‰ 5 ç­†ï¼‰ï¼šä½¿ç”¨ `git log --oneline -5`
  - è¼¸å‡ºè‡³ `push_logs/YYYYMMDD_HH-MM_push_[åˆ†æ”¯å].md`

  > è«‹ç­‰å¾…æˆ‘ç¢ºèªæ˜¯å¦ç”Ÿæˆå ±å‘Šã€‚

---

# æ¨é€å®‰å…¨è¦ç¯„
- ç¦æ­¢è‡ªå‹•ä½¿ç”¨ `--force`ï¼Œé™¤éä½¿ç”¨è€…æ˜ç¢ºè¼¸å…¥ã€Œforceã€
- è‹¥å‡ºç¾æ¨é€è¢«æ‹’çµ•çš„éŒ¯èª¤ï¼Œå¿…é ˆæç¤ºå…ˆè¡ŒåŒæ­¥é ç«¯å†æ¨é€
- æ‰€æœ‰æ“ä½œéƒ½éœ€è¦ç”¨æˆ¶ç¢ºèªå¾Œæ‰åŸ·è¡Œ
